(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{51658:function(e,s,t){Promise.resolve().then(t.bind(t,6742))},6742:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return D},dynamic:function(){return E}});var a=t(57437),l=t(2265),n=t(66070),i=t(62869),r=t(76818),c=t(35974),o=t(53647),d=t(64972),m=t(82222),x=t(41671),h=t(76865),u=t(82431),p=t(48736),j=t(17689),f=t(79205);let g=(0,f.Z)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),v=(0,f.Z)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var N=t(92735),b=t(98728),w=t(64454),y=t(85785),k=t(5095),C=t(60429),A=t(84006);let E="force-dynamic";function D(){var e;let{state:s,actions:t}=(0,w.f)(),[f,E]=(0,l.useState)([{id:"1",role:"system",content:"Welcome to WRDO Cave Ultra AI Chat! I'm your intelligent assistant with access to multiple AI models and autonomous agents. How can I help you today?",timestamp:new Date}]),[D,I]=(0,l.useState)(""),[G,T]=(0,l.useState)("gpt-4o"),[_,z]=(0,l.useState)(!1),[Z,M]=(0,l.useState)([]),[R,S]=(0,l.useState)(!1),[U,$]=(0,l.useState)(0),q=(0,l.useRef)(null),O=(0,l.useRef)(null),[F,L]=(0,l.useState)(null);(0,l.useEffect)(()=>{L({id:"user_1",name:"Admin User",email:"admin@wrdo.cave",role:"admin",permissions:["chat.send","chat.upload","ai.configure","agent.approve"]})},[]),(0,l.useEffect)(()=>{var e;null===(e=q.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[f]),(0,l.useEffect)(()=>{var e,a;t.updateMemory({userId:(null===(e=s.currentUser)||void 0===e?void 0:e.id)||"unknown",pageContext:{messageCount:f.length,selectedModel:G,conversationCost:U,lastMessage:null===(a=f[f.length-1])||void 0===a?void 0:a.timestamp},sessionContext:{},userPreferences:{preferredModel:G},conversationHistory:f.slice(-10).map(e=>({timestamp:e.timestamp,message:"user"===e.role?e.content:"",response:"assistant"===e.role?e.content:"",model:e.model||G,cost:e.cost||0}))})},[f,G,U,t,null===(e=s.currentUser)||void 0===e?void 0:e.id]);let P=async()=>{if(!D.trim()&&0===Z.length)return;let e={id:"msg_".concat(Date.now()),role:"user",content:D,timestamp:new Date};E(s=>[...s,e]),I(""),z(!0);try{var a,l;if(A.$C[G]){let e=await A.eF.requestAgentExecution(G,D,{userId:(null===(a=s.currentUser)||void 0===a?void 0:a.id)||"unknown",justification:"User requested agent execution"}),t={id:"msg_".concat(Date.now(),"_agent"),role:"assistant",content:"\uD83E\uDD16 **Agent Execution Request**\n\nAgent: ".concat(A.$C[G].name,"\nTask: ").concat(D,"\nEstimated Cost: ").concat((0,A.GG)(e.estimatedCost),"\nEstimated Time: ").concat(e.estimatedTime," minutes\nRisk Level: ").concat(e.riskLevel,"\n\nThis request requires approval before execution. Would you like to proceed?"),timestamp:new Date,isAgent:!0,needsApproval:!0,approved:!1};E(e=>[...e,t])}else{let e=f.slice(-10).map(e=>({role:e.role,content:e.content}));e.push({role:"user",content:D});let a=await A.eF.chatCompletion(e,G,{userId:null===(l=s.currentUser)||void 0===l?void 0:l.id,conversationId:"chat_".concat(Date.now())}),n={id:"msg_".concat(Date.now(),"_ai"),role:"assistant",content:a.content,timestamp:new Date,model:a.model,cost:a.cost,processingTime:a.processingTime,metadata:{provider:a.provider,tokensUsed:a.tokensUsed,fallbackUsed:a.fallbackUsed,fallbackReason:a.fallbackReason}};E(e=>[...e,n]),$(e=>e+a.cost),t.addNotification({type:"success",title:"AI Response Generated",message:"Response from ".concat(a.model," - Cost: ").concat((0,A.GG)(a.cost)),read:!1})}}catch(s){let e={id:"msg_".concat(Date.now(),"_error"),role:"assistant",content:"❌ **Error**: ".concat(s instanceof Error?s.message:"Unknown error occurred"),timestamp:new Date};E(s=>[...s,e]),t.addNotification({type:"error",title:"AI Request Failed",message:s instanceof Error?s.message:"Unknown error",read:!1})}finally{z(!1)}},V=async e=>{let s=f.findIndex(s=>s.id===e);if(-1===s)return;let t=[...f];t[s]={...t[s],approved:!0,content:t[s].content.replace("Would you like to proceed?","✅ **Approved - Executing...**")},E(t),setTimeout(()=>{let e={id:"msg_".concat(Date.now(),"_agent_result"),role:"assistant",content:"\uD83E\uDD16 **Agent Execution Complete**\n\nAgent: ".concat(A.$C[G].name,"\nExecution Time: 2.5 minutes\nCost: ").concat((0,A.GG)(5),"\nStatus: ✅ Success\n\n**Results:**\n- Comprehensive analysis completed\n- 15 data points processed\n- 3 recommendations generated\n- Full report available for download"),timestamp:new Date,isAgent:!0,cost:5};E(s=>[...s,e]),$(e=>e+5)},3e3)};return F?(0,a.jsx)(y.a,{user:F,children:(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-blue-950 to-slate-900 p-6",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"AI Chat Interface"}),(0,a.jsx)("p",{className:"text-slate-400",children:"Intelligent conversation with multiple AI models and agents"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(c.C,{variant:"outline",className:"text-blue-300 border-blue-400/30",children:[f.filter(e=>"system"!==e.role).length," messages"]}),(0,a.jsxs)(c.C,{variant:"outline",className:"text-green-300 border-green-400/30",children:["Total: ",(0,A.GG)(U)]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-3",children:(0,a.jsxs)(n.Zb,{className:"bg-slate-800/50 border-slate-700 h-[70vh] flex flex-col",children:[(0,a.jsx)(n.Ol,{className:"border-b border-slate-700",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(n.ll,{className:"text-white flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"h-5 w-5"}),"WRDO AI Chat"]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)(o.Ph,{value:G,onValueChange:T,children:[(0,a.jsx)(o.i4,{className:"w-48 bg-slate-700 border-slate-600 text-white",children:(0,a.jsx)(o.ki,{})}),(0,a.jsxs)(o.Bw,{className:"bg-slate-700 border-slate-600",children:[Object.values(A.jd).map(e=>(0,a.jsxs)(o.Ql,{value:e.id,className:"text-white hover:bg-slate-600",children:[e.name," - ",(0,A.GG)(1e3*e.costPerToken),"/1k tokens"]},e.id)),Object.values(A.$C).map(e=>(0,a.jsxs)(o.Ql,{value:e.id,className:"text-white hover:bg-slate-600",children:["\uD83E\uDD16 ",e.name," - $",e.estimatedCostPerRequest,"/request"]},e.id))]})]})})]})}),(0,a.jsxs)(n.aY,{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[(0,a.jsx)(k.M,{children:f.map(e=>(0,a.jsx)(C.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:"max-w-[80%] rounded-lg p-4 ".concat("user"===e.role?"bg-blue-600 text-white":"system"===e.role?"bg-slate-700/50 text-slate-300 border border-slate-600":"bg-slate-700 text-white"),children:[e.isAgent&&(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-xs font-medium",children:"AI Agent"})]}),(0,a.jsx)("div",{className:"whitespace-pre-wrap",children:e.content}),e.needsApproval&&!e.approved&&(0,a.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,a.jsxs)(i.z,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>V(e.id),children:[(0,a.jsx)(x.Z,{className:"h-3 w-3 mr-1"}),"Approve"]}),(0,a.jsxs)(i.z,{size:"sm",variant:"outline",className:"border-red-400 text-red-300 hover:bg-red-500/20",children:[(0,a.jsx)(h.Z,{className:"h-3 w-3 mr-1"}),"Deny"]})]}),(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-4 text-xs text-slate-400",children:[(0,a.jsx)("span",{children:e.timestamp.toLocaleTimeString()}),e.model&&(0,a.jsxs)("span",{children:["Model: ",e.model]}),e.cost&&(0,a.jsxs)("span",{children:["Cost: ",(0,A.GG)(e.cost)]}),e.processingTime&&(0,a.jsxs)("span",{children:["Time: ",e.processingTime,"ms"]})]})]})},e.id))}),_&&(0,a.jsx)(C.E.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-start",children:(0,a.jsx)("div",{className:"bg-slate-700 text-white rounded-lg p-4 max-w-[80%]",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)("span",{children:"AI is thinking..."})]})})}),(0,a.jsx)("div",{ref:q})]}),(0,a.jsxs)("div",{className:"p-4 border-t border-slate-700",children:[Z.length>0&&(0,a.jsx)("div",{className:"mb-3 flex flex-wrap gap-2",children:Z.map(e=>(0,a.jsxs)(c.C,{variant:"outline",className:"text-blue-300 border-blue-400/30",children:[(0,a.jsx)(p.Z,{className:"h-3 w-3 mr-1"}),e.name]},e.id))}),(0,a.jsxs)("div",{className:"flex items-end gap-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(r.g,{value:D,onChange:e=>I(e.target.value),placeholder:"Type your message...",className:"bg-slate-700 border-slate-600 text-white resize-none",rows:3,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),P())}}),D&&(0,a.jsxs)("div",{className:"mt-1 text-xs text-slate-400",children:["Estimated cost: ",(0,A.GG)((0,A.GZ)(D,G))]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"file",ref:O,onChange:e=>{let s=Array.from(e.target.files||[]);s.forEach(e=>{let s={id:"file_".concat(Date.now(),"_").concat(Math.random()),name:e.name,size:e.size,type:e.type};M(e=>[...e,s])}),t.addNotification({type:"success",title:"Files Uploaded",message:"".concat(s.length," file(s) uploaded successfully"),read:!1})},multiple:!0,accept:".pdf,.doc,.docx,.txt,.png,.jpg,.jpeg",className:"hidden"}),(0,a.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>{var e;return null===(e=O.current)||void 0===e?void 0:e.click()},className:"text-white border-slate-600",children:(0,a.jsx)(j.Z,{className:"h-4 w-4"})}),(0,a.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>{S(!R),t.addNotification({type:"info",title:"Voice Feature",message:R?"Voice recording stopped":"Voice recording started (placeholder)",read:!1})},className:"text-white border-slate-600 ".concat(R?"bg-red-500/20":""),children:(0,a.jsx)(g,{className:"h-4 w-4"})}),(0,a.jsx)(i.z,{onClick:P,disabled:_||!D.trim()&&0===Z.length,className:"bg-blue-600 hover:bg-blue-700",children:(0,a.jsx)(v,{className:"h-4 w-4"})})]})]})]})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(n.Zb,{className:"bg-slate-800/50 border-slate-700",children:[(0,a.jsx)(n.Ol,{children:(0,a.jsx)(n.ll,{className:"text-white text-sm",children:"Current Model"})}),(0,a.jsx)(n.aY,{className:"space-y-3",children:A.jd[G]?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white font-medium",children:A.jd[G].name}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:A.jd[G].provider})]}),(0,a.jsxs)("div",{className:"text-xs text-slate-300",children:[(0,a.jsxs)("p",{children:["Cost: ",(0,A.GG)(1e3*A.jd[G].costPerToken),"/1k tokens"]}),(0,a.jsxs)("p",{children:["Max tokens: ",A.jd[G].maxTokens.toLocaleString()]})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:A.jd[G].capabilities.map(e=>(0,a.jsx)(c.C,{variant:"outline",className:"text-xs text-slate-300",children:e},e))})]}):A.$C[G]?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white font-medium",children:A.$C[G].name}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"AI Agent"})]}),(0,a.jsxs)("div",{className:"text-xs text-slate-300",children:[(0,a.jsxs)("p",{children:["Est. cost: $",A.$C[G].estimatedCostPerRequest,"/request"]}),(0,a.jsxs)("p",{children:["Max time: ",A.$C[G].maxExecutionTime," minutes"]}),(0,a.jsxs)("p",{children:["Risk: ",A.$C[G].riskLevel]})]}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:A.$C[G].description})]}):null})]}),(0,a.jsxs)(n.Zb,{className:"bg-slate-800/50 border-slate-700",children:[(0,a.jsx)(n.Ol,{children:(0,a.jsx)(n.ll,{className:"text-white text-sm",children:"Session Stats"})}),(0,a.jsxs)(n.aY,{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Messages:"}),(0,a.jsx)("span",{className:"text-white",children:f.filter(e=>"system"!==e.role).length})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Total Cost:"}),(0,a.jsx)("span",{className:"text-white",children:(0,A.GG)(U)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-slate-400",children:"Files Uploaded:"}),(0,a.jsx)("span",{className:"text-white",children:Z.length})]})]})]}),(0,a.jsxs)(n.Zb,{className:"bg-slate-800/50 border-slate-700",children:[(0,a.jsx)(n.Ol,{children:(0,a.jsx)(n.ll,{className:"text-white text-sm",children:"Quick Actions"})}),(0,a.jsxs)(n.aY,{className:"space-y-2",children:[(0,a.jsx)(i.z,{variant:"outline",size:"sm",className:"w-full text-white border-slate-600",onClick:()=>E([f[0]]),children:"Clear Chat"}),(0,a.jsxs)(i.z,{variant:"outline",size:"sm",className:"w-full text-white border-slate-600",onClick:()=>{t.addNotification({type:"info",title:"Export Chat",message:"Chat export feature will be implemented",read:!1})},children:[(0,a.jsx)(N.Z,{className:"h-3 w-3 mr-2"}),"Export Chat"]}),(0,a.jsxs)(i.z,{variant:"outline",size:"sm",className:"w-full text-white border-slate-600",onClick:()=>window.location.href="/dashboard/ai",children:[(0,a.jsx)(b.Z,{className:"h-3 w-3 mr-2"}),"AI Settings"]})]})]})]})]})]})})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-blue-950 to-slate-900 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-white",children:"Loading..."})})}},76818:function(e,s,t){"use strict";t.d(s,{g:function(){return i}});var a=t(57437),l=t(2265),n=t(94508);let i=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...l})});i.displayName="Textarea"},82431:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])}},function(e){e.O(0,[73,429,22,905,763,517,357,710,785,666,971,117,744],function(){return e(e.s=51658)}),_N_E=e.O()}]);