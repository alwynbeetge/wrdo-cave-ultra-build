"use strict";(()=>{var e={};e.id=520,e.ids=[520],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},72887:(e,r,s)=>{s.r(r),s.d(r,{originalPathname:()=>w,patchFetch:()=>f,requestAsyncStorage:()=>m,routeModule:()=>u,serverHooks:()=>h,staticGenerationAsyncStorage:()=>l});var i={};s.r(i),s.d(i,{POST:()=>c,dynamic:()=>p});var a=s(79182),t=s(72007),n=s(56719),o=s(93442),d=s(96351);let p="force-dynamic";async function c(){try{return await (0,d.t0)(),o.NextResponse.json({success:!0,message:"Default roles initialized successfully"})}catch(e){return console.error("Seed error:",e),o.NextResponse.json({error:"Failed to initialize default roles"},{status:500})}}let u=new a.AppRouteRouteModule({definition:{kind:t.x.APP_ROUTE,page:"/api/seed/route",pathname:"/api/seed",filename:"route",bundlePath:"app/api/seed/route"},resolvedPagePath:"/home/ubuntu/wrdo-cave-fixed/app/app/api/seed/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:m,staticGenerationAsyncStorage:l,serverHooks:h}=u,w="/api/seed/route";function f(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:l})}},83178:(e,r,s)=>{s.d(r,{_:()=>a});var i=s(53524);let a=globalThis.prisma??new i.PrismaClient},96351:(e,r,s)=>{s.d(r,{Jm:()=>a,N$:()=>t,t0:()=>o});var i=s(83178);async function a(e){return(await i._.userRoleAssignment.findMany({where:{userId:e},include:{role:!0}})).map(e=>({id:e.role.id,name:e.role.name,description:e.role.description,permissions:e.role.permissions}))}async function t(e,r){return(await a(e)).some(e=>e.permissions.includes(r)||e.permissions.includes("manage:system"))}let n={admin:{name:"admin",description:"Full system administrator",permissions:["manage:system"]},manager:{name:"manager",description:"Team manager with extended permissions",permissions:["read:dashboard","write:dashboard","read:users","write:users","read:projects","write:projects","read:chat","write:chat","read:ai","write:ai"]},user:{name:"user",description:"Standard user",permissions:["read:dashboard","write:dashboard","read:projects","write:projects","read:chat","write:chat","read:ai"]},viewer:{name:"viewer",description:"Read-only access",permissions:["read:dashboard","read:projects","read:chat"]}};async function o(){for(let[e,r]of Object.entries(n))await i._.userRole.upsert({where:{name:r.name},update:{description:r.description,permissions:r.permissions},create:{name:r.name,description:r.description,permissions:r.permissions}})}}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),i=r.X(0,[372,609],()=>s(72887));module.exports=i})();